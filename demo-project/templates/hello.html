<!DOCTYPE html>
<html>
    <head>
        <title>
            test
        </title>
        <link href="/static/css/bootstrap.css" rel="stylesheet"/>
        <link href="/static/css/bootstrap-theme.css" rel="stylesheet"/>
        <script src="/static/js/jquery-3.2.1.js" type="text/javascript">
        </script>

        <script src="/static/js/ajax-need.js" type="text/javascript">
        </script>
        <script src="/static/js/bootstrap.js" type="text/javascript">
        </script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">
                        {{homepage}}
                    </a>
                </div>
                <div>
                    <ul class="nav navbar-nav">
                        {% for athlete in classification %}
                        <li>
                            <a href="#">
                                {{ athlete.val }}
                            </a>
                        </li>
                        {% endfor %}
                        <li>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container">
        	<div class="row">
                    <form action="/creategitrepository" role="form">
                      <h2>Create new book</h2>

                        <div class="form-group">
                            <label for="newbookname">
                                create a new book
                            </label>
                            <input class="form-control" name="newbookname" placeholder="new book name" type="text">
                            </input>
                        </div>
                        <div class="col-xs-1 col-sm-1">
                            <button class="btn btn-default" type="submit">
                                submit
                            </button>
                        </div>
                    </form>
                </div>

            <hr>
          </hr>

            <div class="row">
                      <form action="/createNewChapter" role="form">
                        <h2>Create new Chapter</h2>

                          <div class="form-group">
                            <label for="bookname">
                                for which book
                            </label>
                            <input class="form-control" name="bookname" placeholder="for which book" type="text">
                            </input>
                          </div>

                            <div class="form-group">
                              <label for="newChapter">
                                  create a new chapter
                              </label>
                              <input class="form-control" name="newChapter" placeholder="new newChapter name" type="text">
                              </input>
                          </div>

                          <div class="col-xs-1 col-sm-1">
                              <button class="btn btn-default" type="submit">
                                  submitnewChapter
                              </button>
                          </div>
                      </form>
                  </div>

              <hr>
              </hr>
                <div class="row">
                    <form action="/updateContent" role="form">
                      {% csrf_token %}
                      <h2>Update content</h2>
                        <div class="form-group">
                          <label for="bookname">
                              for which book
                          </label>
                          <input class="form-control" id="bookname" name="bookname" placeholder="for which book" type="text">
                          </input>
                        </div>

                          <div class="form-group">
                            <label for="chapterName">
                                update a chapter
                            </label>
                            <input class="form-control" id="chapterName"  name="chapterName" placeholder="chapterName name" type="text">
                            </input>
                        </div>

                        <div class="form-group">
                          <label for="commitContent">
                              what do you do in this update operation
                          </label>
                          <input class="form-control" name="commitContent" placeholder="commit content" type="text">
                          </input>
                      </div>

                      <div class="form-group">
                          <a class="btn btn-success" onclick="getContent();">getContent</a>
                      </div>

                        <div class="form-group">
                            <textarea class="form-control" id="content" name="content" placeholder="content" type="text" rows=10>
                            </textarea>
                        </div>

                        <div class="form-group">
                          <div class="col-xs-2 col-sm-2">
                              <button class="btn btn-default" type="submit"> submitContent</button>
                          </div>
                        </div>
                    </form>
                </div>

              <hr>
              </hr>

                <div class="row">
                    <form action="/showHistory" role="form">
                      <h2>Show history</h2>
                        <div class="form-group">
                          <label for="bookname">
                              for which book
                          </label>
                          <input class="form-control"  name="bookname" placeholder="for which book" type="text">
                          </input>
                        </div>

                          <div class="form-group">
                            <label for="chapterName">
                                for which chapter
                            </label>
                            <input class="form-control" name="chapterName" placeholder="chapterName name" type="text">
                            </input>
                        </div>

                        <div class="form-group">
                          <label for="author">
                              for which author
                          </label>
                          <input class="form-control" name="author" placeholder="author name" type="text">
                          </input>
                      </div>

                        <div class="form-group">
                          <div class="col-xs-2 col-sm-2">
                              <button class="btn btn-default" type="submit"> submitContent</button>
                          </div>
                        </div>
                    </form>
                </div>
        </div>
    </body>
</html>

<script type="text/javascript">
  function getContent() {
    var bookname = $("#bookname").val();
    var chaptername = $("#chapterName").val();

    $.ajax({
      url: '/getContentFromServer',
      type: 'POST',
      dataType: 'json',
      data: {
        bookname: bookname,
        chaptername: chaptername,
     }
    })
    .done(function(resp) {
      var tempstr = "";
      for (var i = 0; i < resp.length; i++) {
        tempstr = tempstr + resp[i];
      }
      console.log(tempstr);
      $("#content").val(tempstr);
    })
    .fail(function() {
      console.log("error");
    })
    .always(function() {
      console.log("complete");
    });

  }
</script>
